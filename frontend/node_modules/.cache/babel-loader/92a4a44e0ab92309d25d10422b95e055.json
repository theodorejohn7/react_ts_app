{"ast":null,"code":"import axios from \"axios\";\nimport { env_var } from \"../config/env\";\nimport { history } from \"../utils/history\";\nimport { getFormDataHeader, getHeaderInfo } from \"../utils/tokenCreator\";\nimport { removeTokens } from \"./localStorage\";\n\nconst handleResponse = response => {\n  if (response.status === 401) {\n    removeTokens();\n    history.push(\"/v1\");\n    window.location.reload();\n  }\n\n  if (response.data.status !== \"OK\") {\n    return response.data;\n  }\n\n  return response;\n};\n\nexport const post = async function (url, body) {\n  let header = await getHeaderInfo();\n\n  try {\n    let response = await axios.post(env_var.BASE_URL + url, body, header);\n    return handleResponse(response);\n  } catch (error) {\n    return handleResponse(error.response);\n  }\n};\nexport const get = async function (url) {\n  let params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let header = await getHeaderInfo();\n\n  try {\n    let response = await axios.get(url, { ...header,\n      params\n    });\n    return handleResponse(response);\n  } catch (error) {\n    throw handleResponse(error.response);\n  }\n};\nexport const put = async function (body, url) {\n  let header = await getHeaderInfo();\n\n  try {\n    let response = await axios.put(env_var.BASE_URL + url, body, header);\n    return handleResponse(response);\n  } catch (error) {\n    throw handleResponse(error.response);\n  }\n};\nexport const deleteApi = async function (url) {\n  let header = await getHeaderInfo();\n\n  try {\n    let response = await axios.delete(env_var.BASE_URL + url, header);\n    return handleResponse(response);\n  } catch (error) {\n    throw handleResponse(error.response);\n  }\n};\nexport const postImage = async function (url, body) {\n  let header = await getFormDataHeader();\n  let formData = new FormData();\n  formData.append(\"file\", body);\n\n  try {\n    let resp = await axios.put(env_var.BASE_URL + url, formData, header);\n    return handleResponse(resp);\n  } catch (error) {\n    throw handleResponse(error.response);\n  }\n};","map":{"version":3,"names":["axios","env_var","history","getFormDataHeader","getHeaderInfo","removeTokens","handleResponse","response","status","push","window","location","reload","data","post","url","body","header","BASE_URL","error","get","params","put","deleteApi","delete","postImage","formData","FormData","append","resp"],"sources":["/home/dell/Desktop/Theo/REACT JS/react_ts_app/frontend/src/services/apiHandler.ts"],"sourcesContent":["import axios from \"axios\";\nimport { env_var } from \"../config/env\";\nimport { history } from \"../utils/history\";\nimport { getFormDataHeader, getHeaderInfo } from \"../utils/tokenCreator\";\nimport { removeTokens } from \"./localStorage\";\n\nconst handleResponse = (response: any) => {\n  if (response.status === 401) {\n    removeTokens();\n    history.push(\"/v1\");\n    window.location.reload();\n  }\n  if (response.data.status !== \"OK\") {\n    return response.data;\n  }\n  return response;\n};\n\nexport const post = async function (url: string, body: any) {\n  let header = await getHeaderInfo();\n  try {\n    let response = await axios.post(env_var.BASE_URL + url, body, header);\n    return handleResponse(response);\n  } catch (error :string) {\n    return handleResponse(error.response);\n  }\n};\n\nexport const get = async function (url: any, params: any = {}) {\n  let header = await getHeaderInfo();\n  try {\n    let response = await axios.get(url, { ...header, params });\n    return handleResponse(response);\n  } catch (error) {\n    throw handleResponse(error.response);\n  }\n};\n\nexport const put = async function (body: any, url: any) {\n  let header = await getHeaderInfo();\n\n  try {\n    let response = await axios.put(env_var.BASE_URL + url, body, header);\n    return handleResponse(response);\n  } catch (error) {\n    throw handleResponse(error.response);\n  }\n};\n\nexport const deleteApi = async function (url: any) {\n  let header = await getHeaderInfo();\n  try {\n    let response = await axios.delete(env_var.BASE_URL + url, header);\n    return handleResponse(response);\n  } catch (error) {\n    throw handleResponse(error.response);\n  }\n};\n\nexport const postImage = async function (url: string, body: any) {\n  let header = await getFormDataHeader();\n  let formData = new FormData();\n  formData.append(\"file\", body);\n  try {\n    let resp = await axios.put(env_var.BASE_URL + url, formData, header);\n    return handleResponse(resp);\n  } catch (error) {\n    throw handleResponse(error.response);\n  }\n};\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,eAAxB;AACA,SAASC,OAAT,QAAwB,kBAAxB;AACA,SAASC,iBAAT,EAA4BC,aAA5B,QAAiD,uBAAjD;AACA,SAASC,YAAT,QAA6B,gBAA7B;;AAEA,MAAMC,cAAc,GAAIC,QAAD,IAAmB;EACxC,IAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;IAC3BH,YAAY;IACZH,OAAO,CAACO,IAAR,CAAa,KAAb;IACAC,MAAM,CAACC,QAAP,CAAgBC,MAAhB;EACD;;EACD,IAAIL,QAAQ,CAACM,IAAT,CAAcL,MAAd,KAAyB,IAA7B,EAAmC;IACjC,OAAOD,QAAQ,CAACM,IAAhB;EACD;;EACD,OAAON,QAAP;AACD,CAVD;;AAYA,OAAO,MAAMO,IAAI,GAAG,gBAAgBC,GAAhB,EAA6BC,IAA7B,EAAwC;EAC1D,IAAIC,MAAM,GAAG,MAAMb,aAAa,EAAhC;;EACA,IAAI;IACF,IAAIG,QAAQ,GAAG,MAAMP,KAAK,CAACc,IAAN,CAAWb,OAAO,CAACiB,QAAR,GAAmBH,GAA9B,EAAmCC,IAAnC,EAAyCC,MAAzC,CAArB;IACA,OAAOX,cAAc,CAACC,QAAD,CAArB;EACD,CAHD,CAGE,OAAOY,KAAP,EAAsB;IACtB,OAAOb,cAAc,CAACa,KAAK,CAACZ,QAAP,CAArB;EACD;AACF,CARM;AAUP,OAAO,MAAMa,GAAG,GAAG,gBAAgBL,GAAhB,EAA4C;EAAA,IAAlBM,MAAkB,uEAAJ,EAAI;EAC7D,IAAIJ,MAAM,GAAG,MAAMb,aAAa,EAAhC;;EACA,IAAI;IACF,IAAIG,QAAQ,GAAG,MAAMP,KAAK,CAACoB,GAAN,CAAUL,GAAV,EAAe,EAAE,GAAGE,MAAL;MAAaI;IAAb,CAAf,CAArB;IACA,OAAOf,cAAc,CAACC,QAAD,CAArB;EACD,CAHD,CAGE,OAAOY,KAAP,EAAc;IACd,MAAMb,cAAc,CAACa,KAAK,CAACZ,QAAP,CAApB;EACD;AACF,CARM;AAUP,OAAO,MAAMe,GAAG,GAAG,gBAAgBN,IAAhB,EAA2BD,GAA3B,EAAqC;EACtD,IAAIE,MAAM,GAAG,MAAMb,aAAa,EAAhC;;EAEA,IAAI;IACF,IAAIG,QAAQ,GAAG,MAAMP,KAAK,CAACsB,GAAN,CAAUrB,OAAO,CAACiB,QAAR,GAAmBH,GAA7B,EAAkCC,IAAlC,EAAwCC,MAAxC,CAArB;IACA,OAAOX,cAAc,CAACC,QAAD,CAArB;EACD,CAHD,CAGE,OAAOY,KAAP,EAAc;IACd,MAAMb,cAAc,CAACa,KAAK,CAACZ,QAAP,CAApB;EACD;AACF,CATM;AAWP,OAAO,MAAMgB,SAAS,GAAG,gBAAgBR,GAAhB,EAA0B;EACjD,IAAIE,MAAM,GAAG,MAAMb,aAAa,EAAhC;;EACA,IAAI;IACF,IAAIG,QAAQ,GAAG,MAAMP,KAAK,CAACwB,MAAN,CAAavB,OAAO,CAACiB,QAAR,GAAmBH,GAAhC,EAAqCE,MAArC,CAArB;IACA,OAAOX,cAAc,CAACC,QAAD,CAArB;EACD,CAHD,CAGE,OAAOY,KAAP,EAAc;IACd,MAAMb,cAAc,CAACa,KAAK,CAACZ,QAAP,CAApB;EACD;AACF,CARM;AAUP,OAAO,MAAMkB,SAAS,GAAG,gBAAgBV,GAAhB,EAA6BC,IAA7B,EAAwC;EAC/D,IAAIC,MAAM,GAAG,MAAMd,iBAAiB,EAApC;EACA,IAAIuB,QAAQ,GAAG,IAAIC,QAAJ,EAAf;EACAD,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAwBZ,IAAxB;;EACA,IAAI;IACF,IAAIa,IAAI,GAAG,MAAM7B,KAAK,CAACsB,GAAN,CAAUrB,OAAO,CAACiB,QAAR,GAAmBH,GAA7B,EAAkCW,QAAlC,EAA4CT,MAA5C,CAAjB;IACA,OAAOX,cAAc,CAACuB,IAAD,CAArB;EACD,CAHD,CAGE,OAAOV,KAAP,EAAc;IACd,MAAMb,cAAc,CAACa,KAAK,CAACZ,QAAP,CAApB;EACD;AACF,CAVM"},"metadata":{},"sourceType":"module"}